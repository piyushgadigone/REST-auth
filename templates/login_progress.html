{% extends "layout.html" %}

{% block stylesheet %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/login.css') }}">
{% endblock %}

{% block content %}
<script type="text/javascript">
    setTimeout(function checkIfDeviceIPIsReported() {
       alert('Test');
       //$.get(
       // url="checkDeviceIP", 
       // data={ 'username':'username', 'token':'token'},
       // success=function(data){
       //     alert('done')
       // })
       var xmlhttp;
       xmlhttp = new XMLHttpRequest();
       
       xmlhttp.onreadystatechange=function(){
         if (xmlhttp.readyState==4 && xmlhttp.status==200)
         {
            document.getElementById("myDiv").innerHTML=xmlhttp.responseText;
         }
       }
       //var data = 'checkDeviceIP?username'+{{ username }} +'&token=' + {{ token }};
       xmlhttp.open("GET",'checkDeviceIP?username=piyush&token=token',true);
       xmlhttp.send();
     }, 5000);
    window.onload = checkIfDeviceIPIsReported();
</script>
<div>
    <img src="{{ url_for('static', filename = 'css/images/ajax-loader.gif') }}"/> 
</div>
<div id="myDiv"><h2>Let AJAX change this text</h2></div>
{% endblock %}
